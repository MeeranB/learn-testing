<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Learn Testing</title>
  </head>
  <body>
    <h1>Open the console</h1>

    <script>
      // the function we're testing
      function square(x) {
        return x * x;
      }

      //An assertion is something we want to be true in order for us to know the code we wrote is running as expected, and a test is a specific instance with a predicate we know to be true

      // This helper function allows us to label tests in the console and to reuse our "result" and "expected" variable names multiple times
      function test(name, functionToBeTested) {

        // Using assertion object with tests in it allows our equal test to know that it was called inside the "correctly squares integers" assertion, real testing libraries using this feature to keep track of which tests failed and which passed within our named assertions
        const assertions = {equal, notEqual}

        console.group(name)
        functionToBeTested(assertions)
        console.groupEnd()

        // Message argument allows us to add more details to our test calls
        function equal(x, y, message = `${x} is equal to ${y}`) {
          if (x === y) {
            console.info(`Pass: ${message}`)
          } else {
            console.error(`Fail: ${message}`)
          }
        }

        function notEqual(x, y, message = `Expected ${x} to not equal ${y}`) {
          if (x !== y) {
            console.info(`Pass: ${message}`)
          } else {
            console.error(`Fail: ${message}`)
          }
        }

      }

      //We call our test function with a label and an instance of the test, it replies with a formatted conclusion in the console

      test("Correctly squares integers", assertions => {
        const result = square(3);
        const expected = 9;
        assertions.equal(result, expected)
      })

    </script>
  </body>
</html>
